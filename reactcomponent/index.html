<!DOCTYPE html>
<html lang="en">
  <meta charset="UTF-8">
  <title>hello world</title>
  <body>
<!--     <button onClick="render()">Render</button>
    <button onClick="unmount()">Unmount</button>
    <hr /> -->
    <div id="panel"></div>
  </body>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/JSXTransformer.js"></script>
  <script type="text/jsx">
    // var App = React.createCall({
    //   render: function(){
    //     return <h1>hello world</h1>
    //   }
    // })
    // React.render(<App />, document.body);
    // var App = React.createClass({
    //   getDefaultProps:function(){
    //     return {
    //       txt1: 'this is a default prop',
    //       cat: 0
    //     }
    //   },
    //   propTypes: {
    //     txt1: React.PropTypes.string,
    //     cat: React.PropTypes.number.isRequired
    //   },
    //   getInitialState:function(){
    //     return{
    //       txt: 'the state machine',
    //       id:0
    //     }
    //   },
    //   update: function(e){
    //     this.setState({txt: e.target.value})
    //   },
    //   render:function(){
    //     var txt1 = this.props.txt1
    //     return (
    //       <div>
    //         <b>BOLD</b>
    //         <h1>{this.props.txt1}</h1>
    //         <input type="text" onChange = {this.update} />
    //         <h2>{this.state.txt}</h2>
    //       </div>
    //       );
    //   }
    // });
    // var App = React.createClass({
    //   getInitialState:function(){
    //     return{
    //       red: 0,
    //       green: 0,
    //       blue: 0
    //     }
    //   },
    //   update:function(e){
    //     this.setState({
    //       red: this.refs.red.refs.range.getDOMNode().value,
    //       green: this.refs.green.refs.range.getDOMNode().value,
    //       blue: this.refs.blue.refs.range.getDOMNode().value
    //     })
    //   },
    //   render: function(){
    //     return(
    //       <div>
    //         {this.state.txt}
    //         <Widget ref="red" update={this.update}/>
    //         <label>{this.state.red}</label>
    //         <Widget ref="green" update={this.update}/>
    //         <label>{this.state.green}</label>
    //         <Widget ref="blue" update={this.update}/>
    //         <label>{this.state.blue}</label>
    //       </div>
    //       )
    //   }
    // })

    // var Widget = React.createClass({
    //   render: function(){
    //     return(
    //       <div>
    //         //<input type="text" onChange = {this.props.update} />
    //         <input type="range" ref="range" min="0" max="255" onChange = {this.props.update} />
    //       </div>
    //       )
    //   }
    // })

    // React.render(<App />, document.body);
    /** @jsx React.DOM */
    // var APP =
    //     React.createClass({
    //         update:function(){
    //             var newVal = this.props.val+1
    //             this.setProps({val:newVal})
    //         },
    //         componentWillMount:function(){
    //             console.log("here i go")
    //         },
    //         render:function(){
    //             console.log("hello world")
    //             return <button onClick={this.update}>{this.props.val}</button>
    //         },
    //         componentDidMount:function(){
    //             console.log("nice place you got here")
    //         },
    //         componentWillUnmount:function(){
    //             console.log("goodbye cruel world!")
    //         },
    //     });

    //     window.render = function(){
    //         React.renderComponent(
    //             <APP val={0} />,
    //             document.getElementById('panel'))
    //     }
    //     window.unmount = function(){
    //         React.unmountComponentAtNode(document.getElementById('panel'))
    //     }
    //
    // var APP =
    //   React.createClass({
    //     getInitialState: function(){
    //       return {increasing: false}
    //     },
    //     update: function(){
    //       var newVal = this.props.val - 1
    //       this.setProps({val: newVal})
    //     },
    //     componentWillReceiveProps: function(nextProps){
    //       this.setState({increasing: nextProps.val > this.props.val})
    //     },
    //     shouldComponentUpdate: function(nextProps, nextState){
    //       return nextProps.val % 5 === 0
    //     },
    //     componentWillUpdate: function(nextProps, nextState){
    //       console.log('nextProps ===' + JSON.stringify(nextProps))
    //       console.log('nextState ===' + JSON.stringify(nextState))
    //     },
    //     componentDidUpdate: function(prevProps, prevState, rootNode){
    //       console.log('prevProps ===' + JSON.stringify(prevProps))
    //     },
    //     render: function(){
    //       console.log(this.state.increasing)
    //       return (
    //         <button onClick={this.update}>{this.props.val}</button>
    //         )
    //     }
    //   })
    //   React.renderComponent(
    //     <APP val={0} />,
    //     document.getElementById('panel')
    //   )
    //
 /** @jsx React.DOM */

    // var ReactMixin = {
    //     componentWillMount:function(){
    //         console.log("will mount")
    //     },
    //     getInitialState:function(){
    //         return {count:0}
    //     },
    //     incrementCount:function(){
    //         this.setState({count:this.state.count+1})
    //     }
    // }

    // var APP =
    //     React.createClass({
    //         render:function(){
    //             return (
    //                     <div>
    //                     <buttonComponent txt="this is the button" />
    //                     <inputComponent txt="this is the input" />
    //                     </div>
    //                 )
    //         }
    //     });
    // var buttonComponent =
    //     React.createClass({
    //         mixins:[ReactMixin],
    //         render:function(){
    //             return <button
    //                             onClick={this.incrementCount}>
    //                             {this.props.txt} - {this.state.count}
    //                          </button>
    //         }
    //     });

    // var inputComponent =
    //     React.createClass({
    //         mixins:[ReactMixin],
    //         componentWillMount:function(){
    //             setInterval(this.incrementCount,1000)
    //         },
    //         render:function(){
    //             return <input value={this.props.txt + ' - '+ this.state.count} />
    //         }
    //     });

    // React.renderComponent(
    //     <APP />,
    //     document.getElementById('panel'))
    var APP = React.createClass({
      getInitialState: function(){
        return{
          red: 0
        }
      },
      update: function(){
        this.setState({
          red: this.refs.red.refs.range.getDOMNode().value
        })
      },
      render: function(){
        return(
          <div>
            <NumInput
              ref = "red"
              min = {0}
              max = {255}
              step = {0.01}
              val = {+this.state.red}
              update = {this.update}
              label = "Red"
              type = "color"
            />
          </div>
        )
      }
    })

    var NumInput = React.createClass({
      propTypes:{
        min: React.PropTypes.number,
        max: React.PropTypes.number,
        step: React.PropTypes.number,
        val: React.PropTypes.number,
        label: React.PropTypes.string,
        update: React.PropTypes.func.isRequired,
        type: React.PropTypes.oneOf(['number', 'range'])
      },
      getDefaultProps:function(){
        return {
          min: null,
          max: null,
          val: 0,
          step: 1,
          label: '',
          type: 'range'
        }
      },
      render: function(){
        var label = this.props.label !== '' ?
        <label>{this.props.label} : {this.props.val}</label> : ''
        return(
          <div>
            <input
            ref ="range"
            type ={this.props.type}
            min = {this.props.min}
            max = {this.props.max}
            step = {this.props.step}
            defaultValue = {this.props.val}
            onChange = {this.props.update} />
            {label}
          </div>
        )
      }
    })

    React.renderComponent(<APP />, document.body)
  </script>
  <script type="text/javascript">
    // var App = React.createClass({
    //   render: function(){
    //     return React.DOM.h1(null, 'Hi there')
    //   }
    // })
    // React.render(App(), document.body)
    //
    // var App = React.createClass({
    //   render:function(){
    //     return React.createElement('h1', null, 'Yo')
    //   }
    // })
    // React.render(React.createElement(App), document.body)
  </script>
</html>